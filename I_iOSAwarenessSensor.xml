<implementation>
  <specVersion>
    <major>1</major>
    <minor>2</minor>
  </specVersion>
  <settings>
    <protocol>cr</protocol>
  </settings>
  <startup>init</startup>
  <functions>
  function init(parentDevice)
          -- Init variables
        if (luup.variable_get("urn:micasaverde-com:serviceId:SecuritySensor1","Armed",parentDevice) == nil) then
        	luup.variable_set("urn:micasaverde-com:serviceId:SecuritySensor1","Armed","1", parentDevice)
        	luup.log ("Initialized variable: 'Armed' = " .. luup.variable_get("urn:micasaverde-com:serviceId:SecuritySensor1","Armed",parentDevice))
        end
        if (luup.variable_get("urn:micasaverde-com:serviceId:SecuritySensor1","Tripped",parentDevice) == nil) then
	        luup.variable_set("urn:micasaverde-com:serviceId:SecuritySensor1","Tripped","0", parentDevice)       
	        luup.log ("Initialized variable: 'Tripped' = " .. luup.variable_get("urn:micasaverde-com:serviceId:SecuritySensor1","Tripped",parentDevice))
	   end
  end
  </functions>
  <actionList>
    <action>
      <serviceId>urn:micasaverde-com:serviceId:iOSAwarenessSensor1</serviceId>
      <name>GetArmed</name>
      <run>
        luup.variable_get("urn:micasaverde-com:serviceId:SecuritySensor1","Armed",parentDevice)
      </run>
    </action>
    <action>
      <serviceId>urn:demo-ron-seese:serviceId:iOSAwarenessSensor1</serviceId>
      <name>SetArmed</name>
      <run>
        luup.variable_set("urn:micasaverde-com:serviceId:SecuritySensor1","Armed",lul_settings.newArmedValue, parentDevice)
      </run>
    </action>
    <action>
      <serviceId>urn:demo-ron-seese:serviceId:iOSAwarenessSensor1</serviceId>
      <name>GetTripped</name>
      <run>
        luup.variable_get("urn:micasaverde-com:serviceId:SecuritySensor1","Tripped",parentDevice)
      </run>
    </action>
    <action>
      <serviceId>urn:demo-ron-seese:serviceId:iOSAwarenessSensor1</serviceId>
      <name>SetTripped</name>
      <run>
        luup.variable_set("urn:micasaverde-com:serviceId:SecuritySensor1","Tripped",lul_settings.newTrippedValue,parentDevice)
      </run>
    </action>
  </actionList>
</implementation>